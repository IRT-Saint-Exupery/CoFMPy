
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python library for Cosimulation based on FMI standard">
      
      
      
      
        <link rel="prev" href="../coordinator/">
      
      
        <link rel="next" href="../wrappers/">
      
      
      <link rel="icon" href="../../assets/favicon_cofmpy_light.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.15">
    
    
      
        <title>Master - CoFMPy</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/custom.css">
    
      <link rel="stylesheet" href="../../sg_gallery-rendered-html.css">
    
      <link rel="stylesheet" href="../../sg_gallery.css">
    
      <link rel="stylesheet" href="../../sg_gallery-dataframe.css">
    
      <link rel="stylesheet" href="../../sg_gallery-binder.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="dark" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#the-cosimulation-master" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CoFMPy" class="md-header__button md-logo" aria-label="CoFMPy" data-md-component="logo">
      
  <img src="../../assets/logo_cofmpy_light.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CoFMPy
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Master
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="dark" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/IRT-Saint-Exupery/CoFMPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cofmpy
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CoFMPy" class="md-nav__button md-logo" aria-label="CoFMPy" data-md-component="logo">
      
  <img src="../../assets/logo_cofmpy_light.png" alt="logo">

    </a>
    CoFMPy
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/IRT-Saint-Exupery/CoFMPy" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    cofmpy
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Getting started
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/configuration_file/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration file
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/cosimulation_initialization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Proper Initialization
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/data_sources/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing data sources
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/helpers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Helpers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Advanced usage
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Advanced usage
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../user_guide/advanced/custom_stream_handler/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create your own data stream handler
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../generated/gallery/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    General examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            General examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/gallery/plot_00_get_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    A first example: an AC voltage source and a resistor
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Academic FMU examples
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Academic FMU examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/gallery/academic_examples/plot_00_bouncing_ball/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The "Bouncing Ball"
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../generated/gallery/academic_examples/plot_01_dual_mass_oscillator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The "Dual Mass Oscillator"
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    API documentation
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            API documentation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coordinator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coordinator
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Master
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Master
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cofmpy.master" class="md-nav__link">
    <span class="md-ellipsis">
      master
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cofmpy.master.Master" class="md-nav__link">
    <span class="md-ellipsis">
      Master
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Master">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.do_step" class="md-nav__link">
    <span class="md-ellipsis">
      do_step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_input_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_input_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_outputs" class="md-nav__link">
    <span class="md-ellipsis">
      get_outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_results" class="md-nav__link">
    <span class="md-ellipsis">
      get_results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.init_simulation" class="md-nav__link">
    <span class="md-ellipsis">
      init_simulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.initialize_values_from_config" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_values_from_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.sanity_check" class="md-nav__link">
    <span class="md-ellipsis">
      sanity_check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.set_inputs" class="md-nav__link">
    <span class="md-ellipsis">
      set_inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.solve_loop" class="md-nav__link">
    <span class="md-ellipsis">
      solve_loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../wrappers/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FMU Wrappers
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../config_parser/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    ConfigParser
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graph_engine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GraphEngine
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Contributing
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cofmpy.master" class="md-nav__link">
    <span class="md-ellipsis">
      master
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cofmpy.master.Master" class="md-nav__link">
    <span class="md-ellipsis">
      Master
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Master">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.do_step" class="md-nav__link">
    <span class="md-ellipsis">
      do_step
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_input_dict" class="md-nav__link">
    <span class="md-ellipsis">
      get_input_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_outputs" class="md-nav__link">
    <span class="md-ellipsis">
      get_outputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.get_results" class="md-nav__link">
    <span class="md-ellipsis">
      get_results
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.init_simulation" class="md-nav__link">
    <span class="md-ellipsis">
      init_simulation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.initialize_values_from_config" class="md-nav__link">
    <span class="md-ellipsis">
      initialize_values_from_config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.sanity_check" class="md-nav__link">
    <span class="md-ellipsis">
      sanity_check
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.set_inputs" class="md-nav__link">
    <span class="md-ellipsis">
      set_inputs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cofmpy.master.Master.solve_loop" class="md-nav__link">
    <span class="md-ellipsis">
      solve_loop
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="the-cosimulation-master">The Cosimulation Master<a class="headerlink" href="#the-cosimulation-master" title="Permanent link">&para;</a></h1>


<div class="doc doc-object doc-module">



<a id="cofmpy.master"></a>
    <div class="doc doc-contents first">

        <p>Module for managing and executing co-simulations involving multiple FMUs.</p>
<p>This module provides a <code>Master</code> class that handles FMU initialization, input setting,
stepping, and result collection during simulation.</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="cofmpy.master.Master" class="doc doc-heading">
            <span class="doc doc-object-name doc-class-name">Master</span>


<a href="#cofmpy.master.Master" class="headerlink" title="Permanent link">&para;</a></h2>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">Master</span><span class="p">(</span>
    <span class="n">fmu_config_list</span><span class="p">,</span>
    <span class="n">connections</span><span class="p">,</span>
    <span class="n">sequence_order</span><span class="p">,</span>
    <span class="n">loop_solver</span><span class="o">=</span><span class="s2">&quot;jacobi&quot;</span><span class="p">,</span>
    <span class="n">fixed_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">fixed_point_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">


        <p>Manages and executes the co-simulation involving multiple FMUs.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">ATTRIBUTE</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.fmu_config_list">fmu_config_list</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>A list of dictionaries containing information about the FMUs to be used in
the simulation.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="list">list</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.connections">connections</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>A dictionary of connections between FMUs. The keys are tuples (source_fmu,
source_variable), and the values are dictionaries with information about the
source and target FMUs and variables.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.sequence_order">sequence_order</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The order in which FMUs should be executed.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="list">list</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.loop_solver">loop_solver</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The method used to solve algebraic loops in the simulation.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.current_time">current_time</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>The current simulation time.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.fixed_point">fixed_point</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Whether to use the fixed-point initialization method.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td><code><span title="cofmpy.master.Master.fixed_point_kwargs">fixed_point_kwargs</span></code></td>
            <td class="doc-attribute-details">
              <div class="doc-md-description">
                <p>Keyword arguments for the fixed-point initialization method.</p>
              </div>
              <p>
                  <span class="doc-attribute-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">METHOD</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="sanity_check (cofmpy.master.Master.sanity_check)" href="#cofmpy.master.Master.sanity_check">sanity_check</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Checks FMU compatibility, I/Os, and headers with the corresponding algorithm.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="set_inputs (cofmpy.master.Master.set_inputs)" href="#cofmpy.master.Master.set_inputs">set_inputs</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Sets the input values for the current simulation step using the provided
input dictionary.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="init_simulation (cofmpy.master.Master.init_simulation)" href="#cofmpy.master.Master.init_simulation">init_simulation</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Initializes the simulation environment and FMUs.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="get_outputs (cofmpy.master.Master.get_outputs)" href="#cofmpy.master.Master.get_outputs">get_outputs</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the output dictionary for the current step.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="get_results (cofmpy.master.Master.get_results)" href="#cofmpy.master.Master.get_results">get_results</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Returns the results of the simulation.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="solve_loop (cofmpy.master.Master.solve_loop)" href="#cofmpy.master.Master.solve_loop">solve_loop</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Uses the defined algorithm to solve algebraic loops in the simulation.</p>
                </div>
              </td>
            </tr>
            <tr class="doc-section-item">
              <td><code><a class="autorefs autorefs-internal" title="do_step (cofmpy.master.Master.do_step)" href="#cofmpy.master.Master.do_step">do_step</a></code></td>
              <td class="doc-function-details">
                <div class="doc-md-description">
                  <p>Performs a single step of the simulation, updating inputs, executing FMUs,
and propagating outputs.</p>
                </div>
              </td>
            </tr>
      </tbody>
    </table>

        <p>Initializes the Master class with FMU configurations, connection details,
sequence order, and loop solver.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fmu_config_list</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>List of dictionaries with FMU configurations.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="list">list</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>connections</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Dictionary mapping connections between FMUs.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>sequence_order</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Execution order of FMUs.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="list">list</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>loop_solver</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Method for solving algebraic loops. Defaults to
"jacobi".</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;jacobi&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fixed_point</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>whether to use the fixed-point initialization method.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>False</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>fixed_point_kwargs</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>keyword arguments for the fixed point initialization
method if fixed_point is set to True. Defaults to None, in which
case the default values are used "solver": "fsolve",
"time_step": minimum_default_step_size, and "xtol": 1e-5.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>







                  <details class="quote">
                    <summary>Source code in <code>cofmpy/master.py</code></summary>
                    <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">fmu_config_list</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">connections</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">sequence_order</span><span class="p">:</span> <span class="nb">list</span><span class="p">,</span>
    <span class="n">loop_solver</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;jacobi&quot;</span><span class="p">,</span>
    <span class="n">fixed_point</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">fixed_point_kwargs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the Master class with FMU configurations, connection details,</span>
<span class="sd">    sequence order, and loop solver.</span>

<span class="sd">    Args:</span>
<span class="sd">        fmu_config_list (list): List of dictionaries with FMU configurations.</span>
<span class="sd">        connections (dict): Dictionary mapping connections between FMUs.</span>
<span class="sd">        sequence_order (list): Execution order of FMUs.</span>
<span class="sd">        loop_solver (str, optional): Method for solving algebraic loops. Defaults to</span>
<span class="sd">            &quot;jacobi&quot;.</span>
<span class="sd">        fixed_point (bool): whether to use the fixed-point initialization method.</span>
<span class="sd">        fixed_point_kwargs (dict): keyword arguments for the fixed point initialization</span>
<span class="sd">            method if fixed_point is set to True. Defaults to None, in which</span>
<span class="sd">            case the default values are used &quot;solver&quot;: &quot;fsolve&quot;,</span>
<span class="sd">            &quot;time_step&quot;: minimum_default_step_size, and &quot;xtol&quot;: 1e-5.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fmu_config_list</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">fmu_config_list</span>  <span class="c1"># List of FMU configurations (dict) from config file</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">connections</span> <span class="o">=</span> <span class="n">connections</span>  <span class="c1"># Dict of connections between FMUs</span>

    <span class="c1"># Load FMUs into dict of FMU Handlers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_load_fmus</span><span class="p">()</span>

    <span class="c1"># Check if the names of the variables match between the connection dict and the FMUs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_connections</span><span class="p">()</span>

    <span class="n">default_step_sizes</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="n">default_step_sizes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">fmu</span><span class="o">.</span><span class="n">default_step_size</span><span class="p">)</span>

    <span class="c1">## find the smaller of all step sizes</span>
    <span class="c1"># remove None from default_step_sizes</span>
    <span class="n">default_step_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">default_step_sizes</span> <span class="k">if</span> <span class="n">x</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">]</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">default_step_sizes</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_step_size</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_step_size</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">default_step_sizes</span><span class="p">)</span>

    <span class="c1"># Sequence order of execution as a List of FMU IDs. Extracted by config parser module</span>
    <span class="c1"># Sequence order of execution as a List of FMU IDs. Extracted by config parser</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">sequence_order</span> <span class="o">=</span> <span class="n">sequence_order</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequence_order</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sequence_order</span> <span class="o">=</span> <span class="p">[</span><span class="n">d</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__keys</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_config_list</span><span class="p">]</span>

    <span class="c1"># Loop solver method (default: Jacobi)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">loop_solver</span> <span class="o">=</span> <span class="n">loop_solver</span>
    <span class="c1"># init current_time to None to check if init_simulation() has been called</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="c1"># Init output and input dictionaries for FMUs to maintain state between steps</span>
    <span class="c1"># Initialize arrays for inputs and outputs</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">fmu_id</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fmu</span><span class="o">.</span><span class="n">get_input_names</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">fmu_id</span><span class="p">,</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_output_dict</span> <span class="o">=</span> <span class="p">{</span>
        <span class="n">fmu_id</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">fmu</span><span class="o">.</span><span class="n">get_output_names</span><span class="p">()))</span>
        <span class="k">for</span> <span class="n">fmu_id</span><span class="p">,</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="c1"># Results dictionary to store the output values for each step</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_results</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">fixed_point</span> <span class="o">=</span> <span class="n">fixed_point</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fixed_point_kwargs</span> <span class="o">=</span> <span class="n">fixed_point_kwargs</span>

    <span class="k">if</span> <span class="n">fixed_point</span> <span class="ow">and</span> <span class="n">fixed_point_kwargs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fixed_point_kwargs</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;solver&quot;</span><span class="p">:</span> <span class="s2">&quot;fsolve&quot;</span><span class="p">,</span>
            <span class="s2">&quot;time_step&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">default_step_size</span><span class="p">,</span>
            <span class="s2">&quot;xtol&quot;</span><span class="p">:</span> <span class="mf">1e-5</span><span class="p">,</span>
        <span class="p">}</span>
</code></pre></div></td></tr></table></div>
                  </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.do_step" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">do_step</span>


<a href="#cofmpy.master.Master.do_step" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">do_step</span><span class="p">(</span><span class="n">step_size</span><span class="p">,</span> <span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">record_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>This method updates the input dictionary with the values from the provided input
dictionary, performs a single step of the simulation on each FMU, using the
solve_loop method, propagates the output values to the corresponding variables
for the next step, and updates the current simulation time accordingly. It also
stores the output values in the results dictionary.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>step_size</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The size of the simulation step.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>input_dict</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A dictionary containing input values for the
simulation. Defaults to None.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>record_outputs</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>Whether to store the output values in the
results dictionary. Defaults to True.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="bool">bool</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>True</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionary containing the output values for this step, structured as
<code>[FMU_ID][Var]</code>.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">do_step</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">step_size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">record_outputs</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This method updates the input dictionary with the values from the provided input</span>
<span class="sd">    dictionary, performs a single step of the simulation on each FMU, using the</span>
<span class="sd">    solve_loop method, propagates the output values to the corresponding variables</span>
<span class="sd">    for the next step, and updates the current simulation time accordingly. It also</span>
<span class="sd">    stores the output values in the results dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        step_size (float): The size of the simulation step.</span>
<span class="sd">        input_dict (dict, optional): A dictionary containing input values for the</span>
<span class="sd">            simulation. Defaults to None.</span>
<span class="sd">        record_outputs (bool, optional): Whether to store the output values in the</span>
<span class="sd">            results dictionary. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the output values for this step, structured as</span>
<span class="sd">            `[FMU_ID][Var]`.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">fmu_ids</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">sequence_order</span><span class="p">:</span>
        <span class="c1"># out = {&quot;fmu_id&quot; : {&quot;output_name&quot; : value}}</span>
        <span class="n">out</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">solve_loop</span><span class="p">(</span><span class="n">fmu_ids</span><span class="p">,</span> <span class="n">step_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">loop_solver</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">fmu_id</span><span class="p">,</span> <span class="n">fmu_output_dict</span> <span class="ow">in</span> <span class="n">out</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="k">for</span> <span class="n">output_name</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fmu_output_dict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="c1"># If output is connected, transfer the value to the connected FMU(s)</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">fmu_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">target_fmu</span><span class="p">,</span> <span class="n">target_variable</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">connections</span><span class="p">[</span>
                        <span class="p">(</span><span class="n">fmu_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)</span>
                    <span class="p">]:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">target_fmu</span><span class="p">][</span><span class="n">target_variable</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

                <span class="c1"># add each output to the result dict, (FMU_ID + Var) as key</span>
                <span class="k">if</span> <span class="n">record_outputs</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[(</span><span class="n">fmu_id</span><span class="p">,</span> <span class="n">output_name</span><span class="p">)]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
                <span class="c1"># add each output to the output dict, [FMU_ID][Var] as key</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_output_dict</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">][</span><span class="n">output_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">if</span> <span class="n">record_outputs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_results</span><span class="p">[</span><span class="s2">&quot;time&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">+=</span> <span class="n">step_size</span>
    <span class="c1"># Return the output value for this step</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.get_input_dict" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_input_dict</span>


<a href="#cofmpy.master.Master.get_input_dict" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_input_dict</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the input dictionary for the current step.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionary containing the input values for the current step,
structured as <code>[fmu_id][variable_name] =&gt; list(value)</code>.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_input_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the input dictionary for the current step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the input values for the current step,</span>
<span class="sd">            structured as `[fmu_id][variable_name] =&gt; list(value)`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.get_outputs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_outputs</span>


<a href="#cofmpy.master.Master.get_outputs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_outputs</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the output dictionary for the current step.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionary containing the output values of the current step,
structured as <code>[FMU_ID][Var]</code>.</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span>[<span title="str">str</span>, <span title="list">list</span>]</code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_outputs</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">list</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the output dictionary for the current step.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the output values of the current step,</span>
<span class="sd">            structured as `[FMU_ID][Var]`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_output_dict</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.get_results" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">get_results</span>


<a href="#cofmpy.master.Master.get_results" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">get_results</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Returns the results of the simulation, this includes the values of every output
variables, for each step, up until the current time of simulation.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionnary containing output values of every step, structured as
[(FMU_ID, Var)]</p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_results</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Returns the results of the simulation, this includes the values of every output</span>
<span class="sd">    variables, for each step, up until the current time of simulation.</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionnary containing output values of every step, structured as</span>
<span class="sd">            [(FMU_ID, Var)]</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_results</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.init_simulation" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">init_simulation</span>


<a href="#cofmpy.master.Master.init_simulation" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">init_simulation</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initializes the simulation environment and FMUs.</p>
<p>This method sets up the necessary dictionaries for the simulation and
initializes the FMUs with either a fixed point algorithm or values provided in
the input dictionary.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_dict</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A dictionary containing input values for the simulation.
Defaults to None.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<details class="the-method-performs-the-following-steps" open>
  <summary>The method performs the following steps</summary>
  <ol>
<li>Sets the current simulation time to 0.</li>
<li>If fixed_point is True, calls the _fixed_point_init() method.</li>
<li>Otherwise, sets the inputs using the provided input_dict and initializes
    each FMU with these values.</li>
</ol>
</details>        <p><strong>Note</strong>: The FMUs are reset after setting the initial values.</p>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">init_simulation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the simulation environment and FMUs.</span>

<span class="sd">    This method sets up the necessary dictionaries for the simulation and</span>
<span class="sd">    initializes the FMUs with either a fixed point algorithm or values provided in</span>
<span class="sd">    the input dictionary.</span>

<span class="sd">    Args:</span>
<span class="sd">        input_dict (dict): A dictionary containing input values for the simulation.</span>
<span class="sd">            Defaults to None.</span>

<span class="sd">    The method performs the following steps:</span>
<span class="sd">        1. Sets the current simulation time to 0.</span>
<span class="sd">        2. If fixed_point is True, calls the _fixed_point_init() method.</span>
<span class="sd">        3. Otherwise, sets the inputs using the provided input_dict and initializes</span>
<span class="sd">            each FMU with these values.</span>

<span class="sd">    **Note**: The FMUs are reset after setting the initial values.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># # Init output and input dictionaries</span>
    <span class="k">for</span> <span class="n">fmu_id</span><span class="p">,</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_output_dict</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fmu</span><span class="o">.</span><span class="n">get_output_names</span><span class="p">()}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fmu</span><span class="o">.</span><span class="n">get_input_names</span><span class="p">()}</span>

    <span class="c1"># Init current_time of simulation to 0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1"># Init input/output/parameter variables with the values provided in the config</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">initialize_values_from_config</span><span class="p">()</span>

    <span class="c1"># INIT: call fixed_step()</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">fixed_point</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Calling Fixed Point Initialization&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>
        <span class="n">fixed_point_solver</span> <span class="o">=</span> <span class="n">FixedPointInitializer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">fixed_point_kwargs</span><span class="p">)</span>
        <span class="n">fixed_point_solution</span> <span class="o">=</span> <span class="n">fixed_point_solver</span><span class="o">.</span><span class="n">solve</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="n">fixed_point_solution</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Skipping Fixed Point Initialization&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_inputs</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="n">input_dict</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">fmu_id</span><span class="p">,</span> <span class="n">fmu_handler</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">init_dict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span>
        <span class="n">fmu_handler</span><span class="o">.</span><span class="n">set_variables</span><span class="p">(</span><span class="n">init_dict</span><span class="p">)</span>
        <span class="n">fmu_handler</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.initialize_values_from_config" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">initialize_values_from_config</span>


<a href="#cofmpy.master.Master.initialize_values_from_config" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">initialize_values_from_config</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Initializes the FMU variables (inputs/outputs/parameters) with the values
provided in the configuration dict.</p>
<p>If the variable is an input, it is also added to the input dictionary</p>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">initialize_values_from_config</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Initializes the FMU variables (inputs/outputs/parameters) with the values</span>
<span class="sd">    provided in the configuration dict.</span>

<span class="sd">    If the variable is an input, it is also added to the input dictionary</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Current time is not initialized. Call init_simulation() first.&quot;</span>
        <span class="p">)</span>

    <span class="k">for</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_config_list</span><span class="p">:</span>
        <span class="n">fmu_handler</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">[</span><span class="n">fmu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__keys</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]]</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fmu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__keys</span><span class="p">[</span><span class="s2">&quot;init&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">fmu_handler</span><span class="o">.</span><span class="n">set_variables</span><span class="p">({</span><span class="n">key</span><span class="p">:</span> <span class="p">[</span><span class="n">value</span><span class="p">]})</span>
            <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">fmu_handler</span><span class="o">.</span><span class="n">get_input_names</span><span class="p">():</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">fmu</span><span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">__keys</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]]][</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="n">value</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.sanity_check" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">sanity_check</span>


<a href="#cofmpy.master.Master.sanity_check" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">sanity_check</span><span class="p">()</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Checks the compatibility of FMUs, including input/output validation and
algorithm compliance.</p>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">sanity_check</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># TODO</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks the compatibility of FMUs, including input/output validation and</span>
<span class="sd">    algorithm compliance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_check_connections</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.set_inputs" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">set_inputs</span>


<a href="#cofmpy.master.Master.set_inputs" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">set_inputs</span><span class="p">(</span><span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Sets the input values for the current simulation step.</p>
<p>This method populates the internal input dictionary (<code>self._input_dict</code>) with
values for the current step. It updates these values with those provided in the
<code>input_dict</code> parameter, if given. The <code>input_dict</code> parameter is expected to be
a dictionary of dictionaries, where each key is an FMU identifier and each value
is another dictionary mapping variable names to their respective values (e.g.,
{"FMU1": {"var1": value}, "FMU2": {"var2": val, "var3": val}}).</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>input_dict</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>A dictionary of dictionaries containing input
values to override the initialization values. Defaults to None.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>None</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RAISES</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
              <span class="doc-raises-annotation">
                  <code><span title="RuntimeError">RuntimeError</span></code>
              </span>
            </td>
            <td class="doc-raises-details">
              <div class="doc-md-description">
                <p>If the current simulation time (<code>self.current_time</code>) is not
initialized. Ensure that init_simulation()` is called before invoking
this method.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_inputs</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">input_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Sets the input values for the current simulation step.</span>

<span class="sd">    This method populates the internal input dictionary (`self._input_dict`) with</span>
<span class="sd">    values for the current step. It updates these values with those provided in the</span>
<span class="sd">    `input_dict` parameter, if given. The `input_dict` parameter is expected to be</span>
<span class="sd">    a dictionary of dictionaries, where each key is an FMU identifier and each value</span>
<span class="sd">    is another dictionary mapping variable names to their respective values (e.g.,</span>
<span class="sd">    {&quot;FMU1&quot;: {&quot;var1&quot;: value}, &quot;FMU2&quot;: {&quot;var2&quot;: val, &quot;var3&quot;: val}}).</span>

<span class="sd">    Args:</span>
<span class="sd">        input_dict (dict, optional): A dictionary of dictionaries containing input</span>
<span class="sd">            values to override the initialization values. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: If the current simulation time (`self.current_time`) is not</span>
<span class="sd">            initialized. Ensure that init_simulation()` is called before invoking</span>
<span class="sd">            this method.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Current time is not initialized. Call init_simulation() first.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">input_dict</span><span class="p">:</span>  <span class="c1"># True if input_dict is not empty</span>
        <span class="k">for</span> <span class="n">fmu</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">fmu</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;FMU &#39;</span><span class="si">{</span><span class="n">fmu</span><span class="si">}</span><span class="s2">&#39; not found in FMUs: &quot;</span>
                    <span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2">.&quot;</span>
                <span class="p">)</span>
            <span class="k">for</span> <span class="n">variable</span> <span class="ow">in</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">fmu</span><span class="p">]:</span>
                <span class="k">if</span> <span class="p">(</span>
                    <span class="n">variable</span>
                    <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">[</span><span class="n">fmu</span><span class="p">]</span><span class="o">.</span><span class="n">get_input_names</span><span class="p">()</span>
                    <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">[</span><span class="n">fmu</span><span class="p">]</span><span class="o">.</span><span class="n">get_parameter_names</span><span class="p">()</span>
                <span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Variable &#39;</span><span class="si">{</span><span class="n">variable</span><span class="si">}</span><span class="s2">&#39; not found in inputs of FMU &#39;</span><span class="si">{</span><span class="n">fmu</span><span class="si">}</span><span class="s2">&#39;:&quot;</span>
                        <span class="sa">f</span><span class="s2">&quot; </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">[</span><span class="n">fmu</span><span class="p">]</span><span class="o">.</span><span class="n">get_input_names</span><span class="p">()</span><span class="si">}</span><span class="s2">.&quot;</span>
                    <span class="p">)</span>
                <span class="c1"># Set given values (will overide values set previously in init)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">fmu</span><span class="p">][</span><span class="n">variable</span><span class="p">]</span> <span class="o">=</span> <span class="n">input_dict</span><span class="p">[</span><span class="n">fmu</span><span class="p">][</span><span class="n">variable</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="cofmpy.master.Master.solve_loop" class="doc doc-heading">
            <span class="doc doc-object-name doc-function-name">solve_loop</span>


<a href="#cofmpy.master.Master.solve_loop" class="headerlink" title="Permanent link">&para;</a></h3>
<div class="doc-signature highlight"><pre><span></span><code><span class="nf">solve_loop</span><span class="p">(</span><span class="n">fmu_ids</span><span class="p">,</span> <span class="n">step_size</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="s1">&#39;jacobi&#39;</span><span class="p">)</span>
</code></pre></div>

    <div class="doc doc-contents ">

        <p>Performs a single simulation step on the given FMUs, using the defined algorithm
to solve algebraic loops in the simulation.</p>
<p>In the case there is no loop, the function will propagate the output values and
return them.</p>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">PARAMETER</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>fmu_ids</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>List of highly coupled FMUs. Contains only one FMU if
there is no loop.</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="list">list</span>[<span title="str">str</span>]</code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>step_size</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The step size for <strong>data exchange</strong> (in cosimulation
mode, FMU integration step is fixed).</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="float">float</span></code>
                  </span>
              </p>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>algo</code>
            </td>
            <td class="doc-param-details">
              <div class="doc-md-description">
                <p>The algorithm to use to solve the loop (default: "jacobi").</p>
              </div>
              <p>
                  <span class="doc-param-annotation">
                    <b>TYPE:</b>
                      <code><span title="str">str</span></code>
                  </span>
                  <span class="doc-param-default">
                    <b>DEFAULT:</b>
                      <code>&#39;jacobi&#39;</code>
                  </span>
              </p>
            </td>
          </tr>
      </tbody>
    </table>


<table>
      <thead>
        <tr>
          <th><span class="doc-section-title">RETURNS</span></th>
          <th><span>DESCRIPTION</span></th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>dict</code>
            </td>
            <td class="doc-returns-details">
              <div class="doc-md-description">
                <p>A dictionary containing the output values for this step of the FMUs
given, structured as <code>[FMU_ID][Var]</code></p>
              </div>
                <p>
                  <span class="doc-returns-annotation">
                    <b>TYPE:</b>
                      <code><span title="dict">dict</span></code>
                  </span>
                </p>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>cofmpy/master.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">solve_loop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fmu_ids</span><span class="p">,</span> <span class="n">step_size</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">algo</span><span class="o">=</span><span class="s2">&quot;jacobi&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Performs a single simulation step on the given FMUs, using the defined algorithm</span>
<span class="sd">    to solve algebraic loops in the simulation.</span>

<span class="sd">    In the case there is no loop, the function will propagate the output values and</span>
<span class="sd">    return them.</span>

<span class="sd">    Args:</span>
<span class="sd">        fmu_ids (list[str]): List of highly coupled FMUs. Contains only one FMU if</span>
<span class="sd">            there is no loop.</span>
<span class="sd">        step_size (float): The step size for **data exchange** (in cosimulation</span>
<span class="sd">            mode, FMU integration step is fixed).</span>
<span class="sd">        algo (str): The algorithm to use to solve the loop (default: &quot;jacobi&quot;).</span>

<span class="sd">    Returns:</span>
<span class="sd">        dict: A dictionary containing the output values for this step of the FMUs</span>
<span class="sd">            given, structured as `[FMU_ID][Var]`</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># TODO check FMU cosimulation mode and raise exception if it is model exchange</span>

    <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>  <span class="c1"># key: fmu_id, value: output_dict (var_name, value)</span>
    <span class="k">if</span> <span class="n">algo</span> <span class="o">==</span> <span class="s2">&quot;jacobi&quot;</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">fmu_id</span> <span class="ow">in</span> <span class="n">fmu_ids</span><span class="p">:</span>
            <span class="n">fmu</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fmu_handlers</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span>
            <span class="n">output</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">fmu</span><span class="o">.</span><span class="n">step</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">current_time</span><span class="p">,</span> <span class="n">step_size</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_input_dict</span><span class="p">[</span><span class="n">fmu_id</span><span class="p">]</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Algorithm </span><span class="si">{</span><span class="n">algo</span><span class="si">}</span><span class="s2"> not implemented for loop solving.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">output</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>




  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.indexes"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.56ea9cef.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../js/custom.js"></script>
      
    
  </body>
</html>